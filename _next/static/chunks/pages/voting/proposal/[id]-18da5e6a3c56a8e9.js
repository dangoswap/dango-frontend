(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9700],{51780:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/voting/proposal/[id]",function(){return t(43250)}])},72002:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(85893),o=(t(67294),t(9269));function i(){var e,n,t=(e=["\n  display: flex;\n  z-index: 2;\n  top: -65%;\n  position: absolute;\n  transform: translate(-50%, -50%);\n  transition: left 200ms ease-out;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return i=function(){return t},t}var c=t(186).ZP.div(i()),s=t(17804);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=function(e){return(0,r.jsxs)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({viewBox:"0 0 34 38"},e,{children:[(0,r.jsx)("rect",{x:"8.83594",width:"5.30132",height:"17.3191",rx:"2.65066",fill:"#D1884F"}),(0,r.jsx)("rect",{x:"19.4385",width:"5.30132",height:"17.3191",rx:"2.65066",fill:"#D1884F"}),(0,r.jsx)("path",{d:"M8.5 13.0084C13.1944 8.40751 20.8056 8.40751 25.5 13.0084C30.1944 17.6093 30.1944 25.0689 25.5 29.6698L17.6538 37.3597C17.2927 37.7136 16.7073 37.7136 16.3462 37.3597L8.5 29.6698C3.80558 25.0689 3.80558 17.6093 8.5 13.0084Z",fill:"#D1884F"}),(0,r.jsx)("ellipse",{cx:"12.3696",cy:"19.9172",rx:"1.76711",ry:"2.59786",fill:"white"}),(0,r.jsx)("ellipse",{cx:"21.2056",cy:"19.9172",rx:"1.76711",ry:"2.59786",fill:"white"})]}))},u=t(84103),d=function(e){return e<0?0:e>100?100:e},f=function(e){var n=e.variant,t=void 0===n?u.o.ROUND:n,i=e.scale,s=void 0===i?u.Q.MD:i,a=e.primaryStep,f=void 0===a?0:a,x=e.secondaryStep,p=void 0===x?null:x,h=e.showProgressBunny,j=void 0!==h&&h,v=e.useDark,m=void 0===v||v,b=e.children;return(0,r.jsx)(o.Z,{$useDark:m,variant:t,scale:s,children:b||(0,r.jsxs)(r.Fragment,{children:[j&&(0,r.jsx)(c,{style:{left:"".concat(d(f),"%")},children:(0,r.jsx)(l,{})}),(0,r.jsx)(o.$,{$useDark:m,primary:!0,style:{width:"".concat(d(f),"%")}}),p?(0,r.jsx)(o.$,{$useDark:m,style:{width:"".concat(d(p),"%")}}):null]})})}},9269:function(e,n,t){"use strict";t.d(n,{$:function(){return h},Z:function(){return j}});var r,o=t(186),i=t(57247),c=t(34357),s=t(84103);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l,u=(a(r={},s.o.ROUND,{borderRadius:"32px"}),a(r,s.o.FLAT,{borderRadius:0}),r),d=(a(l={},s.Q.MD,{height:"16px"}),a(l,s.Q.SM,{height:"8px"}),l);function f(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function x(){var e=f(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: ",";\n  height: 100%;\n  transition: width 200ms ease;\n"]);return x=function(){return e},e}function p(){var e=f(["\n  position: relative;\n  background-color: ",";\n  box-shadow: ",";\n  overflow: hidden;\n\n  "," {\n    border-top-left-radius: ",";\n    border-bottom-left-radius: ",";\n  }\n\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var h=o.ZP.div(x(),(function(e){var n=e.theme,t=e.$useDark,r=e.primary,o=e.$background;return o||(t?r?n.colors.secondary:"".concat(n.colors.secondary,"80"):r?c.C0.secondary:"".concat(c.C0.secondary,"80"))}));h.defaultProps={primary:!1};var j=o.ZP.div(p(),(function(e){var n=e.theme;return e.$useDark?n.colors.input:c.C0.input}),(function(e){return e.theme.shadows.inset}),h,(function(e){return e.variant===s.o.FLAT?"0":"32px"}),(function(e){return e.variant===s.o.FLAT?"0":"32px"}),(0,i.bU)({variants:u}),(0,i.bU)({prop:"scale",variants:d}),i.Dh)},84103:function(e,n,t){"use strict";t.d(n,{o:function(){return r},Q:function(){return o}});var r={ROUND:"round",FLAT:"flat"},o={MD:"md",SM:"sm"}},59667:function(e,n,t){"use strict";var r=t(85893),o=(t(67294),t(17804));function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return(0,r.jsx)(o.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({viewBox:"0 0 24 24"},e,{children:(0,r.jsx)("path",{d:"M8.11997 14.7101L12 10.8301L15.88 14.7101C16.27 15.1001 16.9 15.1001 17.29 14.7101C17.68 14.3201 17.68 13.6901 17.29 13.3001L12.7 8.7101C12.31 8.3201 11.68 8.3201 11.29 8.7101L6.69997 13.3001C6.30997 13.6901 6.30997 14.3201 6.69997 14.7101C7.08997 15.0901 7.72997 15.1001 8.11997 14.7101Z"})}))}},36196:function(e,n,t){"use strict";var r=t(85893),o=t(186),i=t(68112),c=t(83559);function s(){var e,n,t=(e=["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return s=function(){return t},t}var a=(0,o.ZP)(c.Z)(s());n.Z=function(){return(0,r.jsx)(a,{children:(0,r.jsx)(i.Z,{})})}},43250:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return nn},default:function(){return tn}});var r=t(85893),o=t(40821),i=t(11163),c=t(36196),s=t(34051),a=t.n(s),l=t(56934),u=t(99273),d=t(58018),f=t(87761),x=t(87388),p=t(83559),h=t(65992),j=t(77044),v=t(80154),m=t(45101),b=t(41664),Z=t(99150),g=t(55027),y=t(71249),w=t(72006),O=t(97971),P=t(20388),S=t(37121),k=t(73408),C=t(53503),D=t(61101),I=t(77005),L=t(5545),F=t(65333),z=t(186),B=t(42298),A=t(38328),V=t(53467),$=t(65398);function E(){var e,n,t=(e=["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 16px;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return E=function(){return t},t}var N=(0,z.ZP)(l.Z)(E(),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.cardBorder})),G=function(e){var n=e.proposal,t=(0,Z.$G)().t,o=new Date(1e3*n.start),i=new Date(1e3*n.end);return(0,r.jsxs)(C.Z,{mb:"16px",children:[(0,r.jsx)(D.Z,{children:(0,r.jsx)(x.Z,{as:"h3",scale:"md",children:t("Details")})}),(0,r.jsxs)(I.Z,{children:[(0,r.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,r.jsx)(L.Z,{color:"textSubtle",children:t("Identifier")}),(0,r.jsx)(F.Z,{href:"".concat($.Gs,"/").concat(n.id),ml:"8px",children:n.id.slice(0,8)})]}),(0,r.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,r.jsx)(L.Z,{color:"textSubtle",children:t("Creator")}),(0,r.jsx)(F.Z,{href:(0,A.XR)(n.author,"address"),ml:"8px",children:(0,V.Z)(n.author)})]}),(0,r.jsxs)(f.Z,{alignItems:"center",mb:"16px",children:[(0,r.jsx)(L.Z,{color:"textSubtle",children:t("Snapshot")}),(0,r.jsx)(F.Z,{href:(0,A.XR)(n.snapshot,"block"),ml:"8px",children:n.snapshot})]}),(0,r.jsxs)(N,{p:"16px",children:[(0,r.jsx)(S.U,{proposalState:n.state,mb:"8px"}),(0,r.jsxs)(f.Z,{alignItems:"center",children:[(0,r.jsx)(L.Z,{color:"textSubtle",fontSize:"14px",children:t("Start Date")}),(0,r.jsx)(L.Z,{ml:"8px",children:(0,B.default)(o,"yyyy-MM-dd HH:mm")})]}),(0,r.jsxs)(f.Z,{alignItems:"center",children:[(0,r.jsx)(L.Z,{color:"textSubtle",fontSize:"14px",children:t("End Date")}),(0,r.jsx)(L.Z,{ml:"8px",children:(0,B.default)(i,"yyyy-MM-dd HH:mm")})]})]})]})]})},M=t(81972),T=t(86096),_=t(72002),R=t(6741),H=t(65044);function U(){var e,n,t=(e=["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return U=function(){return t},t}var Q,X=(0,z.ZP)(L.Z)(U()),J=function(e){var n=e.choices,t=e.votes,o=e.votesLoadingStatus,i=(0,Z.$G)().t,c=(0,P.zn)(t),s=(0,j.Ge)().account,a=(0,P.Z$)(t);return(0,r.jsxs)(C.Z,{children:[(0,r.jsx)(D.Z,{children:(0,r.jsx)(x.Z,{as:"h3",scale:"md",children:i("Current Results")})}),(0,r.jsxs)(I.Z,{children:[o===O.iF.Fetched&&n.map((function(e,n){var t=c[e]||[],o=(0,P.Z$)(t),u=0===a?0:o/a*100,d=t.some((function(e){return s&&e.voter.toLowerCase()===s.toLowerCase()}));return(0,r.jsxs)(l.Z,{mt:n>0?"24px":"0px",children:[(0,r.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,r.jsx)(X,{mb:"4px",title:e,children:e}),d&&(0,r.jsxs)(M.Z,{variant:"success",outline:!0,ml:"8px",children:[(0,r.jsx)(T.Z,{mr:"4px"})," ",i("Voted")]})]}),(0,r.jsx)(l.Z,{mb:"4px",children:(0,r.jsx)(_.Z,{primaryStep:u,scale:"sm"})}),(0,r.jsxs)(f.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(L.Z,{color:"textSubtle",children:i("%total% Votes",{total:(0,H.uf)(o,0,2)})}),(0,r.jsxs)(L.Z,{children:[u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"%"]})]})]},e)})),o===O.iF.Fetching&&n.map((function(e,n){return(0,r.jsxs)(l.Z,{mt:n>0?"24px":"0px",children:[(0,r.jsx)(f.Z,{alignItems:"center",mb:"8px",children:(0,r.jsx)(X,{mb:"4px",title:e,children:e})}),(0,r.jsx)(l.Z,{mb:"4px",children:(0,r.jsx)(R.Z,{height:"36px",mb:"4px"})})]},e)}))]})]})},q=t(67294),Y=t(97561),K=t(83482),W=t(789),ee=t(30621),ne=t(74602),te=t(81141),re=t(64011),oe=t(23917);!function(e){e.MAIN="main",e.DETAILS="details"}(Q||(Q={}));var ie=t(19782),ce=t(12347),se=t(70335),ae=t(90767),le=function(e){var n=e.vote,t=e.total,o=e.isPending,i=e.isLoading,c=e.onConfirm,s=e.onViewDetails,a=e.onDismiss,l=(0,Z.$G)().t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ae.I,{children:[(0,r.jsx)(L.Z,{color:"secondary",mb:"8px",textTransform:"uppercase",fontSize:"12px",bold:!0,children:l("Voting For")}),(0,r.jsx)(X,{bold:!0,fontSize:"20px",mb:"8px",title:n.label,children:n.label}),(0,r.jsx)(L.Z,{color:"secondary",mb:"8px",textTransform:"uppercase",fontSize:"12px",bold:!0,children:l("Your Voting Power")}),i?(0,r.jsx)(R.Z,{height:"64px",mb:"24px"}):(0,r.jsxs)(ae.k,{onClick:s,style:{cursor:"pointer"},children:[(0,r.jsx)(L.Z,{bold:!0,fontSize:"20px",children:(0,H.uf)(t,0,3)}),(0,r.jsx)(ie.Z,{scale:"sm",variant:"text",children:(0,r.jsx)(ce.Z,{width:"24px"})})]}),(0,r.jsx)(L.Z,{as:"p",color:"textSubtle",fontSize:"14px",children:l("Are you sure you want to vote for the above choice? This action cannot be undone.")})]}),(0,r.jsx)(u.Z,{isLoading:o,endIcon:o?(0,r.jsx)(se.Z,{spin:!0,color:"currentColor"}):null,disabled:i||0===t,width:"100%",mb:"8px",onClick:c,children:l("Confirm Vote")}),(0,r.jsx)(u.Z,{variant:"secondary",width:"100%",onClick:a,children:l("Cancel")})]})},ue=t(6365),de=t(4411);function fe(e,n,t,r,o,i,c){try{var s=e[i](c),a=s.value}catch(l){return void t(l)}s.done?n(a):Promise.resolve(a).then(r,o)}function xe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){xe(e,n,t[n])}))}return e}var he=function(e){var n,t=e.onSuccess,o=e.proposalId,i=e.vote,c=e.block,s=e.onDismiss,u=(0,q.useState)(Q.MAIN),d=u[0],f=u[1],x=(0,q.useState)(!0),p=x[0],h=x[1],v=(0,q.useState)(!1),b=v[0],g=v[1],y=(0,j.Ge)().account,w=(0,Z.$G)().t,O=(0,W.Z)().toastError,S=(0,re.Z)(),k=S.library,C=S.connector,D=(0,oe.Z)().theme,I=(0,de.Z)(c,p),L=I.isLoading,F=I.total,z=I.cakeBalance,B=I.cakeVaultBalance,A=I.cakePoolBalance,V=I.poolsBalance,$=I.cakeBnbLpBalance,E=I.ifoPoolBalance,N=d===Q.MAIN,G=N?null:function(){return f(Q.MAIN)},M=(xe(n={},Q.MAIN,w("Confirm Vote")),xe(n,Q.DETAILS,w("Voting Power")),n),T=function(){h(!1),s()},_=function(){var e,n=(e=a().mark((function e(){var n,r,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),n=JSON.stringify(pe({},(0,P.GB)(),{type:m.Nl.VOTE,payload:{proposal:o,choice:i.value}})),e.next=5,(0,te.l)(C,k,y,n);case 5:return r=e.sent,c={address:y,msg:n,sig:r},e.next=9,(0,P.Jl)(c);case 9:return g(!1),e.next=12,t();case 12:T(),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(0),g(!1),O(w("Error"),null===(s=e.t0)||void 0===s?void 0:s.message),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){fe(i,r,o,c,s,"next",e)}function s(e){fe(i,r,o,c,s,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,r.jsx)(ne.Z,{title:M[d],onBack:G,onDismiss:s,hideCloseButton:!N,headerBackground:D.colors.gradients.cardHeader,children:(0,r.jsxs)(l.Z,{mb:"24px",width:"320px",children:[d===Q.MAIN&&(0,r.jsx)(le,{vote:i,isLoading:L,isPending:b,total:F,onConfirm:_,onViewDetails:function(){return f(Q.DETAILS)},onDismiss:T}),d===Q.DETAILS&&(0,r.jsx)(ue.Z,{total:F,cakeBalance:z,ifoPoolBalance:E,cakeVaultBalance:B,cakePoolBalance:A,poolsBalance:V,cakeBnbLpBalance:$,block:c})]})})};function je(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ve(e,n,t,r,o,i,c){try{var s=e[i](c),a=s.value}catch(l){return void t(l)}s.done?n(a):Promise.resolve(a).then(r,o)}function me(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function be(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function Ze(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],c=!0,s=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);c=!0);}catch(a){s=!0,o=a}finally{try{c||null==t.return||t.return()}finally{if(s)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return je(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return je(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function ye(){var e=ge(["\n  align-items: center;\n  border: 1px solid ",";\n  border-radius: 16px;\n  cursor: ",";\n  display: flex;\n  margin-bottom: 16px;\n  padding: 16px;\n"]);return ye=function(){return e},e}function we(){var e=ge(["\n  flex: 1;\n  padding-left: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 0;\n"]);return we=function(){return e},e}var Oe=z.ZP.label(ye(),(function(e){var n=e.theme,t=e.isChecked;return n.colors[t?"success":"cardBorder"]}),(function(e){return e.isDisabled?"not-allowed":"pointer"})),Pe=z.ZP.div(we()),Se=function(e){var n=e.proposal,t=e.onSuccess,o=be(e,["proposal","onSuccess"]),i=(0,q.useState)(null),c=i[0],s=i[1],l=(0,Z.$G)().t,d=(0,W.Z)().toastSuccess,f=(0,j.Ge)().account,p=function(){var e,n=(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(l("Vote cast!")),t&&t();case 2:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){ve(i,r,o,c,s,"next",e)}function s(e){ve(i,r,o,c,s,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),h=Ze((0,Y.Z)((0,r.jsx)(he,{onSuccess:p,proposalId:n.id,vote:c,block:Number(n.snapshot)})),1)[0];return(0,r.jsxs)(C.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){me(e,n,t[n])}))}return e}({},o,{children:[(0,r.jsx)(D.Z,{children:(0,r.jsx)(x.Z,{as:"h3",scale:"md",children:l("Cast your vote")})}),(0,r.jsxs)(I.Z,{children:[n.choices.map((function(e,n){var t=n+1===(null===c||void 0===c?void 0:c.value);return(0,r.jsxs)(Oe,{isChecked:t,isDisabled:!f,children:[(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(K.Z,{scale:"sm",value:e,checked:t,onChange:function(){s({label:e,value:n+1})},disabled:!f})}),(0,r.jsx)(Pe,{children:(0,r.jsx)(L.Z,{as:"span",title:e,children:e})})]},e)})),f?(0,r.jsx)(u.Z,{onClick:h,disabled:null===c,children:l("Cast Vote")}):(0,r.jsx)(ee.Z,{})]})]}))},ke=t(59667),Ce=t(96913),De=t(75472),Ie=t.n(De),Le=t(98913),Fe=t.n(Le);function ze(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function Be(){var e=ze(["\n  border-bottom: 1px solid ",";\n  padding: 16px 24px;\n"]);return Be=function(){return e},e}function Ae(){var e=ze(["\n  flex: 1;\n"]);return Ae=function(){return e},e}var Ve=(0,z.ZP)(f.Z)(Be(),(function(e){return e.theme.colors.cardBorder})),$e=(0,z.ZP)(R.Z)(Ae()),Ee=function(){return(0,r.jsx)(l.Z,{children:Fe()(10).map((function(e){return(0,r.jsxs)(Ve,{children:[(0,r.jsx)(R.Z,{height:"21px",mr:"32px",width:"100px"}),(0,r.jsx)($e,{height:"21px",mr:"32px",width:"100%"}),(0,r.jsx)($e,{height:"21px",width:"100%"})]},e)}))})},Ne=t(20522);function Ge(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function Me(){var e=Ge(["\n  grid-area: address;\n"]);return Me=function(){return e},e}function Te(){var e=Ge(["\n  grid-area: choice;\n  overflow: hidden;\n"]);return Te=function(){return e},e}function _e(){var e=Ge(["\n  justify-self: end;\n  grid-area: vote;\n"]);return _e=function(){return e},e}function Re(){var e=Ge(["\n  border-bottom: 1px solid ",";\n  grid-gap: 8px;\n  grid-template-areas:\n    'address address address'\n    'choice choice vote';\n  grid-template-columns: 1fr 1fr 120px;\n  padding: 8px 16px;\n\n  "," {\n    grid-gap: 16px;\n    grid-template-areas: 'address choice vote';\n    padding: 16px 24px;\n  }\n"]);return Re=function(){return e},e}var He=(0,z.ZP)(l.Z).attrs({alignItems:"center"})(Me()),Ue=(0,z.ZP)(l.Z)(Te()),Qe=(0,z.ZP)(l.Z)(_e()),Xe=(0,z.ZP)(Ne.Z)(Re(),(function(e){return e.theme.colors.cardBorder}),(function(e){return e.theme.mediaQueries.sm})),Je=function(e){var n,t=e.vote,o=e.isVoter,i=(0,Z.$G)().t,c=!!(null===(n=t.metadata)||void 0===n?void 0:n.votingPower),s=c?parseFloat(t.metadata.votingPower).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3}):"--";return(0,r.jsxs)(Xe,{children:[(0,r.jsx)(He,{children:(0,r.jsxs)(f.Z,{alignItems:"center",children:[(0,r.jsx)(F.Z,{href:(0,A.XR)(t.voter,"address"),children:(0,V.Z)(t.voter)}),o&&(0,r.jsxs)(M.Z,{variant:"success",outline:!0,ml:"8px",children:[(0,r.jsx)(T.Z,{mr:"4px"})," ",i("Voted")]})]})}),(0,r.jsx)(Ue,{children:(0,r.jsx)(X,{title:t.proposal.choices[t.choice-1],children:t.proposal.choices[t.choice-1]})}),(0,r.jsx)(Qe,{children:(0,r.jsxs)(f.Z,{alignItems:"center",justifyContent:"end",children:[(0,r.jsx)(L.Z,{title:t.metadata.votingPower,children:s}),c&&(0,r.jsx)(F.Z,{href:"".concat($.Gs,"/").concat(t.id)})]})})]})},qe=function(e){var n,t=parseFloat(null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.votingPower);return t||(t=0),t},Ye=function(e){var n=e.votes,t=e.votesLoadingStatus,o=e.totalVotes,i=(0,q.useState)(!1),c=i[0],s=i[1],a=(0,Z.$G)().t,l=(0,j.Ge)().account,d=Ie()(n,[qe,"created"],["desc","desc"]),p=c?d:d.slice(0,20),h=t===O.iF.Fetched;return(0,r.jsxs)(C.Z,{children:[(0,r.jsx)(D.Z,{children:(0,r.jsxs)(f.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,r.jsx)(x.Z,{as:"h3",scale:"md",children:a("Votes (%count%)",{count:o?o.toLocaleString():"-"})}),!h&&(0,r.jsx)(se.Z,{spin:!0,width:"22px"})]})}),!h&&(0,r.jsx)(Ee,{}),h&&p.length>0&&(0,r.jsxs)(r.Fragment,{children:[p.map((function(e){var n=l&&e.voter.toLowerCase()===l.toLowerCase();return(0,r.jsx)(Je,{vote:e,isVoter:n},e.id)})),(0,r.jsx)(f.Z,{alignItems:"center",justifyContent:"center",py:"8px",px:"24px",children:(0,r.jsx)(u.Z,{width:"100%",onClick:function(){s(!c)},variant:"text",endIcon:c?(0,r.jsx)(ke.Z,{color:"primary",width:"21px"}):(0,r.jsx)(Ce.Z,{color:"primary",width:"21px"}),disabled:!h,children:a(c?"Hide":"See All")})})]}),h&&0===p.length&&(0,r.jsx)(f.Z,{alignItems:"center",justifyContent:"center",py:"32px",children:(0,r.jsx)(x.Z,{as:"h5",children:a("No votes found")})})]})};function Ke(e,n,t,r,o,i,c){try{var s=e[i](c),a=s.value}catch(l){return void t(l)}s.done?n(a):Promise.resolve(a).then(r,o)}var We=function(){var e,n,t=(0,i.useRouter)().query.id,c=(0,Z.$G)().t,s=(0,j.Ge)().account,C=(0,v.Z)(t?["proposal",t]:null,(function(){return(0,h.pU)(t)})),D=C.status,I=C.data,L=C.error,F=null!==I&&void 0!==I?I:{},z=F.id,B=void 0===z?null:z,A=F.snapshot,V=void 0===A?null:A,$=(0,o.ZP)(B&&V?["proposal",B,"votes"]:null,(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.uy)(B,Number(V)));case 1:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function c(e){Ke(i,r,o,c,s,"next",e)}function s(e){Ke(i,r,o,c,s,"throw",e)}c(void 0)}))})),E=$.status,N=$.data,M=$.mutate,T=s&&N&&N.some((function(e){return e.voter.toLowerCase()===s.toLowerCase()})),_=E===O.iF.Fetching||D===O.iF.Fetching;return!I&&L?(0,r.jsx)(w.Z,{}):(0,r.jsxs)(g.Z,{py:"40px",children:[(0,r.jsx)(p.V,{}),(0,r.jsx)(l.Z,{mb:"40px",children:(0,r.jsx)(b.default,{href:"/voting",passHref:!0,children:(0,r.jsx)(u.Z,{as:"a",variant:"text",startIcon:(0,r.jsx)(d.Z,{color:"primary",width:"24px"}),px:"0",children:c("Back to Vote Overview")})})}),(0,r.jsxs)(k.Z,{children:[(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(l.Z,{mb:"32px",children:[(0,r.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,r.jsx)(S.U,{proposalState:I.state}),(0,r.jsx)(S.g,{isCoreProposal:(0,P.md)(I),ml:"8px"})]}),(0,r.jsx)(x.Z,{as:"h1",scale:"xl",mb:"16px",children:I.title}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(y.Z,{children:I.body})})]}),!_&&!T&&I.state===m.r7.ACTIVE&&(0,r.jsx)(Se,{proposal:I,onSuccess:M,mb:"16px"}),(0,r.jsx)(Ye,{votes:N,totalVotes:null!==(n=null===N||void 0===N?void 0:N.length)&&void 0!==n?n:I.votes,votesLoadingStatus:E})]}),(0,r.jsxs)(l.Z,{position:"sticky",top:"40px",children:[(0,r.jsx)(G,{proposal:I}),(0,r.jsx)(J,{choices:I.choices,votes:N,votesLoadingStatus:E})]})]})]})},en=function(){return(0,i.useRouter)().isFallback?(0,r.jsx)(c.Z,{}):(0,r.jsx)(We,{})},nn=!0,tn=function(e){var n=e.fallback,t=void 0===n?{}:n;return(0,r.jsx)(o.J$,{value:{fallback:t},children:(0,r.jsx)(en,{})})}},72006:function(e,n,t){"use strict";var r=t(85893),o=t(186),i=t(87388),c=t(5545),s=t(99273),a=t(83559),l=t(99150),u=t(41664);function d(){var e,n,t=(e=["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 64px);\n  justify-content: center;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return d=function(){return t},t}var f=o.ZP.div(d());n.Z=function(){var e=(0,l.$G)().t;return(0,r.jsx)(a.Z,{children:(0,r.jsxs)(f,{children:[(0,r.jsx)(i.Z,{scale:"xxl",children:"404"}),(0,r.jsx)(c.Z,{mb:"16px",children:e("Oops, page not found.")}),(0,r.jsx)(u.default,{href:"/",passHref:!0,children:(0,r.jsx)(s.Z,{as:"a",scale:"sm",children:e("Back Home")})})]})})}}},function(e){e.O(0,[2298,3440,5440,9986,4275,712,9774,2888,179],(function(){return n=51780,e(e.s=n);var n}));var n=e.O();_N_E=n}]);